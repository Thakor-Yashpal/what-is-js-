"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var self=void 0;(void 0).pressKey=null,(void 0).keymap=Keyboard.Keymap,document.onkeydown=function(t){self.pressKey=t.which},(void 0).getKey=function(){return this.keymap[this.pressKey]},Component.Stage=function(t,e){if(this.keyEvent=new Keyboard.ControllerEvents,this.width=t.width,this.height=t.height,this.length=[],this.food={},this.score=0,this.direction="right",this.conf={cw:10,size:5,fps:1e3},"object"==_typeof(e))for(var i in e)e.hasOwnProperty(i)&&(this.conf[i]=e[i])},Component.Snake=function(t,e){this.stage=new Component.Stage(t,e),this.initSnake=function(){for(var t=0;t<this.stage.conf.size;t++)this.stage.length.push({x:t,y:0})},this.initSnake(),this.initFood=function(){this.stage.food={x:Math.round(Math.random()*(this.stage.width-this.stage.conf.cw)/this.stage.conf.cw),y:Math.round(Math.random()*(this.stage.height-this.stage.conf.cw)/this.stage.conf.cw)}},this.initFood(),this.restart=function(){this.stage.length=[],this.stage.food={},this.stage.score=0,this.stage.direction="right",this.stage.keyEvent.pressKey=null,this.initSnake(),this.initFood()}},Game.Draw=function(a,h){this.drawStage=function(){var t=h.stage.keyEvent.getKey();void 0!==t&&(h.stage.direction=t),a.fillStyle="white",a.fillRect(0,0,h.stage.width,h.stage.height);var e=h.stage.length[0].x,i=h.stage.length[0].y;switch(h.stage.direction){case"right":e++;break;case"left":e--;break;case"up":i--;break;case"down":i++}if(1!=this.collision(e,i)){if(e==h.stage.food.x&&i==h.stage.food.y){h.stage.score++,h.initFood()}else{var n=h.stage.length.pop();n.x=e,n.y=i}h.stage.length.unshift(tail);for(var o=0;o<h.stage.length.length;o++){var s=h.stage.length[o];this.drawCell(s.x,s.y)}this.drawCell(h.stage.food.x,h.stage.food.y),a.fillText("Score: "+h.stage.score,5,h.stage.height-5)}else h.restart()},this.drawCell=function(t,e){a.fillStyle="rgb(170, 170, 170)",a.beginPath(),a.arc(t*h.stage.conf.cw+6,e*h.stage.conf.cw+6,4,0,2*Math.PI,!1),a.fill()},this.collision=function(t,e){return-1==t||t==h.stage.width/h.stage.conf.cw||-1==e||e==h.stage.height/h.stage.conf.cw}},Game.Snake=function(t,e){var i=document.getElementById(t),n=i.getContext("2d"),o=new Component.Snake(i,e),s=new Game.Draw(n,o);setInterval(function(){s.drawStage()},o.stage.conf.fps)},window.onload=function(){new Game.Snake("stage",{fps:100,size:4})};
//# sourceMappingURL=what03.min.js.map
